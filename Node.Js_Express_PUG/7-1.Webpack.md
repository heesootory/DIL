# Webpack


<br>


## index


<!-- TOC -->

- [Webpack](#webpack)
  - [index](#index)
  - [Webpack ì´ë€?](#webpack-ì´ë€)
  - [Webpack ì„¤ì¹˜](#webpack-ì„¤ì¹˜)
  - [Webpack.config.js](#webpackconfigjs)
    - [__dirname : jsì— ë‚´ì¥ ìƒìˆ˜ -> ì™„ë²½í•œ ì ˆëŒ€ê²½ë¡œ(ì™„ì „ ì²˜ìŒë¶€í„° í˜„ì¬ dirê¹Œì§€)ë¥¼ ë‚˜íƒ€ëƒ„.](#__dirname--jsì—-ë‚´ì¥-ìƒìˆ˜---ì™„ë²½í•œ-ì ˆëŒ€ê²½ë¡œì™„ì „-ì²˜ìŒë¶€í„°-í˜„ì¬-dirê¹Œì§€ë¥¼-ë‚˜íƒ€ëƒ„)
    - [path.resolve : ì ˆëŒ€ê²½ë¡œë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” ì—­í• .](#pathresolve--ì ˆëŒ€ê²½ë¡œë¥¼-ë§Œë“¤ì–´ì£¼ëŠ”-ì—­í• )
    - [rules :  ê°ê°ì˜ íŒŒì¼ ì¢…ë¥˜ì— ë”°ë¼ ì–´ë–¤ ì „í™˜ì„ í•  ê±´ì§€ ê²°ì •í•˜ëŠ” ê²ƒ.](#rules---ê°ê°ì˜-íŒŒì¼-ì¢…ë¥˜ì—-ë”°ë¼-ì–´ë–¤-ì „í™˜ì„-í• -ê±´ì§€-ê²°ì •í•˜ëŠ”-ê²ƒ)
  - [Express -> assets/js/main.js](#express---assetsjsmainjs)
    - [static file - ì •ì  íŒŒì¼](#static-file---ì •ì -íŒŒì¼)
    - [webpack ë™ì‘í™•ì¸](#webpack-ë™ì‘í™•ì¸)

<!-- /TOC -->


<br>




---



<br>


## Webpack ì´ë€?

> ë°±ì—”ë“œì˜ jsëŠ” babel-nodeì— ì˜í•´ ì–´ë””ì„œë“  ëŒì•„ê°€ê²Œ ë§Œë“¤ì—ˆë‹¤.

> í”„ë¡ íŠ¸ì—”ë“œì—ì„œë„, jsê°€ ëª¨ë“  ë¸Œë¼ìš°ì €ì—ì„œ ì¸ì‹ ê°€ëŠ¥í•œ jsë¡œ ë°”ê¿”ì¤˜ì•¼ í•˜ëŠ”ë°, Webpackì´ ê·¸ ì—­í• ì„ í•œë‹¤.

![d](/Image/Express/w1.PNG)
[https://webpack.js.org/](https://webpack.js.org/)

> ê·¸ë¦¼ì—ì„œì™€ ê°™ì´ ìš°ë¦¬ê°€ ì£¼ëŠ” ì–´ë–¤íŒŒì¼ì´ë˜ì§€ ë°›ì•„ì„œ, ëª¨ë“  ë¸Œë¼ìš°ì €ê°€ ì´í•´ ê°€ëŠ¥í•œ íŒŒì¼ë“¤ë¡œ ì²˜ë¦¬, ë³€ê²½ í•´ì£¼ëŠ” ì—­í• ì„ í•œë‹¤.

> ì˜ˆë¥¼ ë“¤ë©´, sassëŠ” ì‚¬ì‹¤ ë¸Œë¼ìš°ì €ê°€ ì´í•´ë¥¼ ëª»í•˜ëŠ”ë°, webpackì´ ì¤‘ê°„ì—ì„œ cssë¡œ ë°”ê¿”ì„œ ë¸Œë¼ìš°ì €ì—ê²Œ ì „ë‹¬í•œë‹¤.

> ì‚¬ì‹¤, ì‹¤ì œë¡œ ì§ì ‘ ì´ê±¸ ì‚¬ìš©í•  ì¼ì€ ì—†ëŠ”ë° ì™œëƒí•˜ë©´, ë¦¬ì•¡íŠ¸ë‚˜ ë¦¬ì•¡íŠ¸ ë„¤ì´í‹°ë¸Œ, ë‹¤ë¥¸ í”„ë ˆì„ì›Œí¬ë“¤ì€ ëŒ€ë¶€ë¶„ ë‚´ì¥ webpackì´ ìˆê¸° ë•Œë¬¸ì´ë‹¤.

> Webpackë¥¼ ëŒ€ì²´í•˜ë©´ì„œ ì¡°ê¸ˆ ì‰¬ìš´ ë²„ì ¼ì¸ gulpê°€ ìˆë‹¤.
> but, Webpackì´ ì‹¤ìƒ ì—…ê³„ í‘œì¤€ì´ë‹¤.

* sass -> .css
* .jpg -> ì••ì¶• jpg

## Webpack ì„¤ì¹˜

```js
npm i webpack webpack-cli -D
```

* -D : devDependenciesì— ë¶™íˆê¸° ìœ„í•´,
* webpack cli : consoleì—ì„œ webpackì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë‹¤.

* error
![d](/Image/Express/w2.PNG)




## Webpack.config.js
![d](/Image/Express/w3.PNG)

> ì´ íŒŒì¼ì—ëŠ” ë§¤ìš° ì˜›ë‚  jsì–¸ì–´ë§Œ ì•Œì•„ë“¤ìŒ.

![d](/Image/Express/w4.PNG)

> client / js / main.js

> ì´ íŒŒì¼ì„ webpackìœ¼ë¡œ ë³´ë‚´ì„œ ë¸Œë¼ìš°ì €ê°€ ì½ì„ ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•˜ì. (ë°”ê¿”ì¤„ ìˆ˜ ìˆëŠ”ì§€)

![d](/Image/Express/w5.PNG)


* client í´ë” : ë¸Œë¼ìš°ì €ì— ë³´ì¼ ë‚´ìš©ë§Œ ë“¤ì–´ê°. (í”„ë¡ íŠ¸ì—”ë“œ)
* entry : ìš°ë¦¬ê°€ ì²˜ë¦¬í•˜ê³ ì í•˜ëŠ” íŒŒì¼(ì†ŒìŠ¤ì½”ë“œ). - main.js
* output : ë³€í˜•ì‹œí‚¤ íŒŒì¼ì„ ì €ì¥í•˜ëŠ” ê³³ ì„¤ì •. (filenameìœ¼ë¡œ í•´ì„œ, pathì— ì €ì¥)

![d](/Image/Express/w6.PNG)

> package.jsonì— scripts í•˜ë‚˜ ì¶”ê°€.

![d](/Image/Express/w7.PNG)

### __dirname : jsì— ë‚´ì¥ ìƒìˆ˜ -> ì™„ë²½í•œ ì ˆëŒ€ê²½ë¡œ(ì™„ì „ ì²˜ìŒë¶€í„° í˜„ì¬ dirê¹Œì§€)ë¥¼ ë‚˜íƒ€ëƒ„.

![d](/Image/Express/w8.PNG)

### path.resolve : ì ˆëŒ€ê²½ë¡œë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” ì—­í• .


![d](/Image/Express/w9.PNG)

> webpack ì„¤ì •.

```bash
npm run assets
```
![d](/Image/Express/w10.PNG)

> ìƒˆë¡œ assetsì´ë¼ëŠ” í´ë”ê°€ ìƒê¸°ê³ , ìš°ë¦¬ê°€ ë„£ì—ˆë˜ ì½”ë“œì˜ ë³€í˜•ì½”ë“œê°€ ì €ì¥ëœê±¸ ë³¼ ìˆ˜ ìˆë‹¤.

>> ì´ì œ ë‹¤ë¥¸ ì½”ë“œë“¤ ì¤‘ì—ì„œë„ ë¸Œë¼ìš°ì €ê°€ ì´í•´í•  ìˆ˜ ì—†ëŠ”ê²ƒë“¤ì„ ìœ„í•´, í˜¸í™˜ì„±ì„ ì¶”ê°€í•´ì•¼í•¨.

>>> ìš°ë¦¬ê°€ ë°±ì—”ë“œì—ì„œ ì„¸ë ¨ëœ jsë¥¼ ì‘ì„±í•˜ë©´, ì§€ë£¨í•˜ì§€ë§Œ ë¸Œë¼ìš°ì €ê°€ ì´í•´í•  ìˆ˜ ì‡ëŠ” jsë¡œ ë³€í˜•ì‹œì¼œì¤¬ë˜ê²Œ babel-nodeì¸ë°, í”„ë¡ íŠ¸ì—”ë“œë„ babelì„ ì´ìš©í•´ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.

ğŸ™Œ ê·¸ëŸ° í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œì²˜ë¦¬ëŠ” package.jsonì—ì„œ í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼, webpack.config.jsì—ì„œ ì§„í–‰í•´ì•¼ í•¨!!

### rules :  ê°ê°ì˜ íŒŒì¼ ì¢…ë¥˜ì— ë”°ë¼ ì–´ë–¤ ì „í™˜ì„ í•  ê±´ì§€ ê²°ì •í•˜ëŠ” ê²ƒ.

![d](/Image/Express/w11.PNG)

> ì´ëŸ° í˜•íƒœ.

> ìš°ë¦¬ê°€ ì‘ì„±í•œ íŒŒì¼ì„ ë³€í™˜ì„ ì ìš© ì‹œí‚¤ëŠ” ì‘ì—…ì„, <mark>"loader"</mark>ë¼ í•œë‹¤.

> ìš°ë¦¬ì˜ ê²½ìš°, babel-loaderê°€ í•„ìš”.

ğŸ™Œ webpackì˜ ê²½ìš°, loaderì„ ì´ìš©í•´ì„œ ë³€í˜•ì‹œí‚¤ëŠ” ê²ƒì´ë‹¤.

> ìœ„ì˜ ì˜ˆì‹œì—ì„œëŠ”, css-loaderì™€ style-loaderë¥¼ ì‚¬ìš©í•´ì„œ, cssíŒŒì¼ì„ ë³€ê²½ì‹œí‚¨ë‹¤.


* rule ì‘ì„±í•˜ê¸°.
> ruleì€ array í˜•íƒœì´ë‹¤. ì—¬ëŸ¬ê°€ì§€ ë³€í™˜ì´ í•„ìš”í•  ìˆ˜ ìˆê¸° ë–„ë¬¸.

> testì•ˆì—ëŠ” regular expressionìœ¼ë¡œ ì‘ì„±.

[https://github.com/babel/babel-loader](https://github.com/babel/babel-loader)
![d](/Image/Express/w12.PNG)

> babel-loaderë§Œ ì—†ìœ¼ë¯€ë¡œ, ì„¤ì¹˜

```js
npm i -D babel-loader
```

![d](/Image/Express/w13.PNG)
![d](/Image/Express/w14.PNG)

> babel-loader ì„¤ì •.

> testì— ìˆëŠ” ìš°ë¦¬ jsì½”ë“œ ì „ë¶€ë¥¼ babel-loaderë¼ëŠ” loaderë¡œ ê°€ê³µì‹œí‚¨ë‹¤. 

> ê¸°ì¡´ì˜ assetsí´ë”ë¥¼ ì§€ìš°ê³ , ë‹¤ì‹œ

```js
npm run assets
```
![d](/Image/Express/w15.PNG)

* mode ì„¤ì •

![d](/Image/Express/w16.PNG)

> ê°œë°œëª¨ë“œ/ ì™„ì„±ëª¨ë“œë¥¼ ì„¤ì •í•´ì•¼í•œë‹¤.

> ì™„ì„±ëª¨ë“œì—ì„œëŠ” ëª¨ë“  ì½”ë“œë¥¼ ì••ì¶•ì‹œí‚¨ë‹¤.

![d](/Image/Express/w17.PNG)

> 'ê°œë°œëª¨ë“œ'ë¡œ ì„¤ì •. í›„ ë‹¤ì‹œ 

```js
npm run assets
```

![d](/Image/Express/w18.PNG)

> ì´ì „ì— ì •ì‹ ì—†ì´ í•œì¤„ë¡œ ë˜ì–´ìˆë˜ ë³€í˜• main.jsê°€ ê°œë°œëª¨ë“œë¡œ ì„¤ì • í›„ ì•Œì•„ë³´ê¸° ì‰½ê²Œ ì •ë¦¬ë¨. ì—ëŸ¬ë„ ëœ¨ì§€ ì•ŠìŒ.


> ìš°ë¦¬ê°€ ê°œë°œì„ ëª¨ë“œ ë§ˆì¹œí›„, production modeë¡œ ë°”ê¾¸ë©´ ëœë‹¤.


* assetsí´ë” : ë¸Œë¼ìš°ì €ê°€ ê°€ì ¸ê°ˆ í´ë”. (webpack ì²˜ë¦¬ í›„)
* clientí´ë” : ìš°ë¦¬ê°€ ê°œë°œí•  í´ë”. (webpack ì²˜ë¦¬ ì „)

<br>
<br>
<br>

## Express -> assets/js/main.js

> ë¸Œë¼ìš°ì €ê°€ main.jsíŒŒì¼ì´ ì €ê¸° ìˆë‹¤ëŠ”ê±¸ expressë¥¼ í†µí•´ ì•Œë ¤ì¤˜ì•¼ í•¨!
(ì˜ˆì „ uploads í´ë” ì²˜ëŸ¼!)

### static file - ì •ì  íŒŒì¼

> expressí•œí…Œ ì‚¬ëŒë“¤ì´ ì´ í´ë” ì•ˆì— ìˆëŠ” íŒŒì¼ë“¤ì„ ë³¼ ìˆ˜ ìˆê²Œ í•´ë‹¬ë¼ê³  ìš”ì²­.

> ê¸°ë³¸ì ìœ¼ë¡œ í´ë”ë“¤ì€ ê³µê°œë˜ì–´ ìˆì§€ ì•Šê³ , serverê°€ ê·¸ê±¸ ê²°ì •í•˜ëŠ” ê²ƒì´ë‹¤.

![d](/Image/Express/w19.PNG)
![d](/Image/Express/w20.PNG)

> ë¸Œë¼ìš°ì €ë¥¼ í†µí•´ ì ‘ê·¼ì´ ê°€ëŠ¥í•´ì§.

```js
app.use("/urlëª…", express.static("í´ë”ëª…"));
```

### webpack ë™ì‘í™•ì¸

![d](/Image/Express/w21.PNG)
> ìš°ë¦¬ê°€ ë„£ì„ ì„¸ë ¨ëœ ì½”ë“œë¥¼ ì‘ì„±.

![d](/Image/Express/w22.PNG)
> ë³€ê²½ì‹œí‚´.

![d](/Image/Express/w23.PNG)
> urlëª…ì€ í´ë”ëª…ê³¼ ë‹¬ë¼ë„ë¨.

![d](/Image/Express/w24.PNG)
> baseì—ì„œ assets í´ë”ì— ìˆëŠ” ê±¸ ë¶ˆëŸ¬ì˜´.

![d](/Image/Express/w25.PNG)
> ë™ì‘ ì„±ê³µ.





































