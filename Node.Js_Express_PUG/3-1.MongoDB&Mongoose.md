# Database - MongoDB


<br>

---

## index


<!-- TOC -->

- [Database - MongoDB](#database---mongodb)
  - [index](#index)
  - [POSTë°©ì‹ìœ¼ë¡œ back-endì— dataë³´ë‚´ê¸°- fakedata(array)](#postë°©ì‹ìœ¼ë¡œ-back-endì—-dataë³´ë‚´ê¸°--fakedataarray)
    - [ìƒì„¸í˜ì´ì§€ êµ¬í˜„(see page - watch)](#ìƒì„¸í˜ì´ì§€-êµ¬í˜„see-page---watch)
      - [ternary operator(ì‚¼í•­ ì—°ì‚°ì) ì‚¬ìš© - ì¡°íšŒìˆ˜](#ternary-operatorì‚¼í•­-ì—°ì‚°ì-ì‚¬ìš©---ì¡°íšŒìˆ˜)
      - [ì ˆëŒ€/ìƒëŒ€ ê²½ë¡œ](#ì ˆëŒ€ìƒëŒ€-ê²½ë¡œ)
    - [ìƒì„¸ ìˆ˜ì • í˜ì´ì§€(edit page)](#ìƒì„¸-ìˆ˜ì •-í˜ì´ì§€edit-page)
    - [action ê³¼ POSTë°©ì‹](#action-ê³¼-postë°©ì‹)
      - [POSTë°©ì‹ìœ¼ë¡œ ë³´ë‚´ëŠ” í˜ì´ì§€ ë§Œë“¤ê¸°](#postë°©ì‹ìœ¼ë¡œ-ë³´ë‚´ëŠ”-í˜ì´ì§€-ë§Œë“¤ê¸°)
      - [GETê³¼ POSTê°€ ê°™ì€ urlì„ ì‚¬ìš©í• ì‹œ](#getê³¼-postê°€-ê°™ì€-urlì„-ì‚¬ìš©í• ì‹œ)
      - [Redirect](#redirect)
      - [POSTë°ì´í„° ë°›ê¸°](#postë°ì´í„°-ë°›ê¸°)
      - [ë°ì´í„° ë³€ê²½](#ë°ì´í„°-ë³€ê²½)

<!-- /TOC -->


<br>


---

## POSTë°©ì‹ìœ¼ë¡œ back-endì— dataë³´ë‚´ê¸°- fakedata(array)

![d](/Image/Express/d1.PNG)

> fakedataë¡œ videoë°°ì—´ì„ ì‚¬ìš©í•  ê»€ë°, ëª¨ë“  ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë„ë¡ ë°–ìœ¼ë¡œ ë¹¼ì£¼ì.

![d](/Image/Express/d2.PNG)

> mixinsì„ ì´ìš©í•´ì„œ, video ì œëª©ë§ˆë‹¤, videoìƒì„¸ í˜ì´ì§€ë¡œ ê°ˆìˆ˜ ìˆë„ë¡ urlë‹¬ì•„ì¤Œ.


ğŸ”
```pug
a(href = `/videos/${video.id}`)=video.title -> â­•
a(href = "/videos/" + video.id)=video.title -> â­•
a(href = "/videos/#{video.id}")=video.title -> âŒ
```
ğŸ”¥
* ë°±í‹±ì„ ì´ìš©í•œê±°ë‘, ë³€ìˆ˜ë¥¼ ê·¸ëƒ¥ ë¬¸ìì—´ ë’¤ì— ë”í•´ì£¼ëŠ” ê±´ ê°€ëŠ¥í•˜ë‹¤.
* #{} ì˜ ë°©ì‹ì€ íƒœê·¸(tag)ì˜ ì†ì„±(attribute)ì—ì„œëŠ” ì‚¬ìš©ì´ ë¶ˆê°€!!
* #{} ì˜ ë°©ì‹ì€, textì™€ í•¨ê»˜ ë³€ìˆ˜ê°€ ì‚¬ìš©ë˜ëŠ” ê³³ë§Œ ì‚¬ìš©í•˜ì!

### ìƒì„¸í˜ì´ì§€ êµ¬í˜„(see page - watch)

![d](/Image/Express/d3.PNG)
![d](/Image/Express/d4.PNG)


* 
```js
const { id } = req.params       //ES6 
const id = req.params.id        //ì¼ë°˜ì ì¸ jsë¬¸ë²• -> ê°€ëŠ¥ 
```

* ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì‹¤ì–´ë³´ë‚´ì£¼ëŠ” ê°’ìœ¼ë¡œ, ë°±í‹±ë„ ê°€ëŠ¥!
```js
{pageTitle: `Watching ${video.title}`}
```

* ë°°ì—´ì€  0ë¶€í„°ë¼, id-1
```js
videos[id-1];
```

#### ternary operator(ì‚¼í•­ ì—°ì‚°ì) ì‚¬ìš© - ì¡°íšŒìˆ˜

![d](/Image/Express/d5.PNG)

> videos ë°°ì—´ì²˜ëŸ¼, video ê°ì²´ë„ ES6ë¬¸ë²•ìœ¼ë¡œ ê°ì²´ëª…ë§Œ ì ì–´ì„œ ë„˜ê¸°ê¸°.
> 
> ì‚¼í•­ì—°ì‚°ìë¡œ returní•  textê¹Œì§€ #{}ì— ì „ë¶€ ë„£ì–´ì¤€ë‹¤(ë…íŠ¹...)

![d](/Image/Express/d6.PNG)


#### ì ˆëŒ€/ìƒëŒ€ ê²½ë¡œ

ğŸ” ì ˆëŒ€ê²½ë¡œ
* localhost:4000/user/profile/password<br>
  -> a href = "/edit"<br>
  => localhost:4000/edit
> ë¬´ì¡°ê±´ rootë¶€í„°

ğŸ” ìƒëŒ€ê²½ë¡œ
* localhost:4000/user/profile/password<br>
  -> a href = "edit"<br>
  => localhost:4000/user/profile/edit
> urlì˜ ë§ˆì§€ë§‰ ë¶€ë¶„ë§Œ ìˆ˜ì •ë¨!<br>

âš¡

> "/" í•˜ë‚˜ì˜ ì°¨ì´!!!


![d](/Image/Express/d7.PNG)

> ìƒëŒ€ê²½ë¡œë¥¼ ì´ìš©í•´ì„œ, ìˆ˜ì • í˜ì´ì§€ë¡œ ì´ë™ ê°€ëŠ¥í•œ anchor.

```pug
a(href="edit")
```
>ì´ë ‡ê²Œ ì ìœ¼ë©´, idê°’ì´ urlì—ì„œ ë‚ ë¼ê°€ê³ ,
>
>video/editìœ¼ë¡œ ë°”ë€Œê¸° ë•Œë¬¸ì—, idê°’ ê°™ì´ ë„£ì–´ì£¼ê¸°!


### ìƒì„¸ ìˆ˜ì • í˜ì´ì§€(edit page)

![d](/Image/Express/d8.PNG)

> video ê°ì²´ ë°ì´í„°ë“¤ì´ ëª¨ë‘ í•„ìš”í•˜ë¯€ë¡œ, ìƒì„¸í˜ì´ì§€ì™€ ë§ˆì°®ê°€ì§€ë¡œ ëª¨ë‘ ë„˜ê¸°ê¸°.

```html
input(placeholder="Video Title", value=pageTitle, required)
```
> ê°’ì´ ìˆë‹¤ë©´, ê¸°ë³¸ì ìœ¼ë¡œ video.titleì— í•´ë‹¹í•˜ëŠ” ê°’ì´ ë“¤ì–´ê°€ ìˆê³ , ê°’ì´ ì—†ë‹¤ë©´, placeholderì˜ ê¸€ì”¨ê°€ ë³´ì¸ë‹¤.


### action ê³¼ POSTë°©ì‹

> POSTë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´, inputì— name = "title"ì„ ì„¤ì •

* GET ë°©ì‹
![d](/Image/Express/d9.PNG)

> urlì— ìš°ë¦¬ê°€ ì§‘ì–´ë„£ì€ ë°ì´í„°ê°€ ê·¸ë˜ë„ ì‹¤ë ¤ì„œ ê°„ë‹¤.
> 
> actionì— methodë¥¼ ë”°ë¡œ ì¨ì£¼ì§€ ì•Šìœ¼ë©´, ê¸°ë³¸ê°’ì´ GETë°©ì‹ì´ë‹¤.

![d](/Image/Express/d10.PNG)

> urlì—ëŠ” ìš°ë¦¬ì˜ ë°ì´í„°ê°€ ë³´ì´ì§€ ì•ŠìŒ.


#### POSTë°©ì‹ìœ¼ë¡œ ë³´ë‚´ëŠ” í˜ì´ì§€ ë§Œë“¤ê¸°
> ì˜ìƒ ì œëª©ì„ ìˆ˜ì •í•˜ë©´, ê·¸ í˜ì´ì§€ì—ì„œ ê·¸ëŒ€ë¡œ ìˆ˜ì •ë˜ê²Œ ë§Œë“¤ê¸°.


![d](/Image/Express/d11.PNG)

* form ë°ì´í„°, method = "POST"
* ë¼ìš°í„°ì—ì„œ POSTë°©ì‹ìœ¼ë¡œ urlì´ ê°€ëŠ” controllerë§Œë“¤ê¸°.
* controllerë§Œë“¤ê¸°.
* ë‹¤ë¥¸ url í˜ì´ì§€ë¡œ postë¥¼ í• êº¼ë©´, actionì— urlì„ ëª…ì‹œí•˜ê³ , ë¼ìš°í„°ì—ì„œ postí•˜ëŠ” urlê²½ë¡œë§Œ ë°”ê¿”ì£¼ë©´ ë¨.
* ìš°ë¦¬ëŠ” ê°™ì€ í˜ì´ì§€ì—ì„œ ìˆ˜ì •í•˜ê²Œ ë§Œë“¤ê¸° ë•Œë¬¸ì—, action í•„ìš”X.
* but! ë¼ìš°í„°ì—ì„œëŠ” postë°©ì‹ì˜ ê°™ì€ url, ë‹¤ë¥¸ controllerë§Œ í•„ìš”.

#### GETê³¼ POSTê°€ ê°™ì€ urlì„ ì‚¬ìš©í• ì‹œ

![d](/Image/Express/d12.PNG)

#### Redirect

> ë¸Œë¼ìš°ì € ìë™ìœ¼ë¡œ ì´ë™.
> ë¦¬ë‹¤ì´ë ‰íŠ¸ëŠ” ì •ë§ ì•„ë¬´ ë°ì´í„°ì˜ ì›€ì§ì„ ì—†ì´ í™”ë©´ë§Œ ê²½ë¡œëŒ€ë¡œ ì›€ì§ì´ê²Œ í• ë•Œ ì‚¬ìš©.

![d](/Image/Express/d14.PNG)

#### POSTë°ì´í„° ë°›ê¸°


ğŸ”¥ ë°ì´í„°ë¥¼ ë°›ê¸° ìœ„í•´, ìš°ì„ ì ìœ¼ë¡œ í•´ì•¼í•˜ëŠ” ì¼!!

> express.urlencoded ë¥¼ ì„¤ì¹˜í•´ì•¼í•¨!

![d](/Image/Express/d13.PNG)

> "extend" ì†ì„±ì„ ì‚¬ìš©í•´ì„œ, dataë¥¼ jsì–¸ì–´ë¡œ ë°”ê¿”ì£¼ëŠ” ì—­í• !

![d](/Image/Express/d16.PNG)

> server.js ì—ì„œ useë¥¼ ì´ìš©í•´ ì ì–´ì£¼ê¸°ë§Œ í•˜ë©´ ë˜ëŠ”ë°,
> 
> routerì™€ controllerì—ì„œ ì‚¬ìš©ë ê²ƒì´ê¸° ë•Œë¬¸ì—, ê¼­ ê·¸ ì•ì— ì ì–´ì£¼ê¸°!!!

![d](/Image/Express/d15.PNG)

> ì½˜ì†”ì„ ì´ìš©í•´ ë°ì´í„°ê°€ ì˜¤ëŠ”ì§€ í™•ì¸!!
> 
> ì •í™•íˆ inputì— ë¶™ì—¬ì¤€ nameì˜ ê°’ìœ¼ë¡œ ì „ë‹¬ëœë‹¤!
> 
> form dataëŠ” req.bodyí˜•íƒœë¡œ ì „ë‹¬ë¨.


#### ë°ì´í„° ë³€ê²½
![d](/Image/Express/d17.PNG)

![d](/Image/Express/d18.PNG)

![d](/Image/Express/d19.PNG)































