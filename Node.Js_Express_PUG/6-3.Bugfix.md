# Bugfix



* Schema  middleware ìˆ˜ì •

![d](/Image/Express/b1.PNG)

> videoë¥¼ ì—…ë¡œë“œ í• ë•Œë§ˆë‹¤, save() í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê²Œ ë˜ëŠ”ë°, pre("save") í•¨ìˆ˜ê°€ ê·¸ ì „ì— í˜¸ì¶œë˜ì–´ ë§¤ë²ˆ, ì—…ë¡œë“œì‹œ ë§ˆë‹¤ ë¹„ë°€ë²ˆí˜¸ê°€ ë‹¤ì‹œ hashëœ ë¹„ë²ˆìœ¼ë¡œ ìƒˆë¡œìš´ userê°ì²´ê°€ ë˜ ì €ìž¥ëœë‹¤.

> -> ë¹„ë²ˆì„ ìƒì„±/ìˆ˜ì • ì‹œì—ë§Œ hash ë˜ê²Œ ë§Œë“¤ìž.




* video controller - getedit

ðŸ”¥ ë¬¼ë¡  í”„ë¡ íŠ¸ì—ì„œ ì•ˆë³´ì´ê²Œ ë§‰ê³  ìžˆì§€ë§Œ, í•­ìƒ ë°±ì—”ë“œì—ì„œë„ ë³´í˜¸ë¥¼ í•´ì•¼í•œë‹¤.
ëª¨ë“  ìœ ì €ë¥¼ ë¯¿ì§€ ëª»í•˜ê¸° ë•Œë¬¸!!

> ë¹„ë””ì˜¤ ì˜ìƒ ìˆ˜ì •ì´ ì†Œìœ ìžì—ê²Œë§Œ ë‚˜íƒ€ë‚˜ë„ë¡ êµ¬í˜„.

![d](/Image/Express/b2.PNG)

> "!==" ìžë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ë°ì´í„° í˜•ì‹ì„ ê¼­ í™•ì¸í•˜ê³ , ë¹„êµí•˜ìž!

![d](/Image/Express/b3.PNG)


> populate ëŠ” Userì˜ ëª¨ë“  ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê¸° ë•Œë¬¸ì—, êµ³ì´ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ë‹¤.

> status(403) => forbidden = not allowed

```js
const {
        user: {_id},
    } = req.session;    //== req.session.user._id
```

* video controller - postedit 

![d](/Image/Express/b4.PNG)


* video controller - deleteVideo 

![d](/Image/Express/b5.PNG)





