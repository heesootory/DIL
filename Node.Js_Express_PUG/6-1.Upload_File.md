# Upload File

<br>

## index






<br>



---






## Upload video

#### view

> edit-profile ì— Videoë¥¼ ì—…ë¡œë“œ í• ìˆ˜ ìˆëŠ”, post êµ¬ì„±.

![d](/Image/Express/v1.PNG)

> ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì„ íƒ ê°€ëŠ¥.


#### middleware - multer

> multerì€ ìš°ë¦¬ê°€ ì—…ë¡œë“œë¥¼ í•  ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ëŠ” middelwareì´ë‹¤.

[https://www.npmjs.com/package/multer](https://www.npmjs.com/package/multer)


> multerë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„ , ë¨¼ì € multer form ì„ ë§Œë“¤ì–´ì•¼ í•œë‹¤.

![d](/Image/Express/v2.PNG)

> multerë¥¼ ì‚¬ìš©í•  formì— ì¶”ê°€.
```js
enctype = "multipart/form-data"
```
> ì¼ë°˜ formê³¼ëŠ” ë‹¤ë¥´ê²Œ encodingë  ê²ƒì´ë¼ëŠ” ì˜ë¯¸ì´ë‹¤.

> íŒŒì¼ì„ ì—…ë¡œë“œí•˜ê¸°ìœ„í•œ ìœ ì¼í•œ ì¡°ê±´ì´ë‹¤.

![d](/Image/Express/v5.PNG)

> dest(destination : íŒŒì¼ì„ ì €ì¥í•  ê³³) ì„ ì§€ì •.



#### íŒŒì¼ ì €ì¥

ğŸ”¥ğŸ”¥ DBì—ëŠ” íŒŒì¼ì„ ì˜¬ë¦¬ì§€ ì•ŠëŠ”ë‹¤!!! ëŒ€ì‹  íŒŒì¼ì˜ URL ê²½ë¡œë§Œ ì €ì¥í•œë‹¤!!!ğŸ”¥ğŸ”¥

> ì—…ë¡œë“œí•œ íŒŒì¼ë“¤ì„ ì €ì¥í•  í´ë”ë¥¼ ë§Œë“¤ì.

![d](/Image/Express/v3.PNG)
![d](/Image/Express/v4.PNG)

#### Routerì— ì—°ê²°.

![d](/Image/Express/v6.PNG)

> ìƒì„±í•œ multerë¥¼ ì‚¬ìš©ë  controller ì§ì „ì— ë¶™í˜€ì£¼ê³ , dataê°€ ì–´ë””ì„œ ì˜¤ëŠ”ì§€(input name) string typeìœ¼ë¡œ ì§€ì •í•´ ì¤€ë‹¤ -> Avatar
> multerì€ form dataê°€ ë‚ ì•„ì˜¤ë©´, post controllerê°€ ë™ì‘ë˜ê¸° ì§ì „, ì¼ë‹¨ ì €ì¥í•  íŒŒì¼ì„ ì§€ì •ëœ ê²½ë¡œì— ì €ì¥í•œ í›„, íŒŒì¼ì— ëŒ€í•œ ì •ë³´ë¥¼ reqì— ë‹´ì•„ì„œ post controllerì—ê²Œ ì „ë‹¬í•œë‹¤!



```js
multerí•¨ìˆ˜.single("form dataê°€ ë‚ ì•„ì˜¬ ê²½ë¡œ string")
```

> singleì´ì™¸ì—ë„ ì—¬ëŸ¬ê°€ì§€ ì†ì„±ë“¤ì´ ìˆëŠ”ë°, íŒŒì¼ì„ í•œê°œë§Œ ë°›ê¸°ë•Œë¬¸ì— single ì„¤ì •.

> ì´ë ‡ê²Œ ì €ì¥ëœ fileì€ req.fileë¡œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë‹¤.

![d](/Image/Express/v7.PNG)
![d](/Image/Express/v8.PNG)
![d](/Image/Express/v9.PNG)
![d](/Image/Express/v10.PNG)

>  ì—…ë¡œë“œ í™•ì¸í•˜ê¸°

#### ì—…ë¡œë“œ í•œ ì´ë¯¸ì§€ì˜ pathë¥¼ avatarUrlì— ì €ì¥ì‹œì¼œì£¼ì.

![d](/Image/Express/v11.PNG)

![d](/Image/Express/v12.PNG)

> ì´ëŸ° ì‹ìœ¼ë¡œ modelì„ ì—…ë°ì´íŠ¸ë¥¼ í•´ì¤„ì‹œ, fileì„ ë„£ì§€ ì•Šì•˜ì„ë•Œ(pathê°€ undefinedì¼ë•Œ), ì—ëŸ¬ê°€ ë‚˜ê²Œ ëœë‹¤.

![d](/Image/Express/v13.PNG)

> fileì„ ì—…ë¡œë“œ í–ˆë‹¤ë©´, ë“±ë¡ì‹œí‚¤ê³ , ì•„ë‹ˆë¼ë©´ session ì •ë³´ì˜ ê¸°ì¡´ì— ìˆë˜ avatarUrlì„ ê·¸ëŒ€ë¡œ ê°€ì ¸ì˜¨ë‹¤.

![d](/Image/Express/v14.PNG)

> ì—…ë¡œë“œ ì´ë¯¸ì§€ ì €ì¥ í´ë” -> gitignore


#### ì´ë¯¸ì§€ ê°€ì ¸ì˜¤ê¸°

![d](/Image/Express/v15.PNG)

> edit-profileì—ì„œ ì—…ë¡œë“œí•œ ì´ë¯¸ì§€ íŒŒì¼ì„ ê°€ì ¸ì˜¤ì.

![d](/Image/Express/v16.PNG)

> ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í•˜ëŠ” ê±¸ ë³¼ ìˆ˜ ìˆëŠ”ë°,

![d](/Image/Express/v17.PNG)

> open in the new tabìœ¼ë¡œ ì´ë¯¸ì§€ì˜ urlì„ ë³´ë©´, url ì£¼ì†Œê°€ ê²¹ì¹œê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

> ìƒëŒ€ê²½ë¡œë¡œ í‘œì‹œ ë˜ìˆëŠ”ê±¸, ì ˆëŒ€ ê²½ë¡œë¡œ ë°”ê¿”ì£¼ì!

> ê·¸ë˜ë„ ì•ˆë¨....

ğŸ”¥ ìš°ë¦¬ê°€ uploadì— íŒŒì¼ë“¤ì„ ì €ì¥í•œë‹¤ê³  í•´ì„œ, ê²½ë¡œëŠ” ì¡´ì¬í•˜ì§€ë§Œ, urlì´ ìë™ìœ¼ë¡œ ìƒê¸°ì§„ ì•ŠëŠ”ë‹¤! ë‹¹ì—°í•œê²Œ, ë°±ì—”ë“œì—ì„œ ë§Œë“œëŠ” ì…ì¥ì¸ ìš°ë¦¬ëŠ”, upload/ì´ë¯¸ì§€ ë¼ëŠ” ê²½ë¡œë¥¼ ì•Œê³  ì‚¬ìš©í•˜ì§€ë§Œ, ë¸Œë¼ìš°ì €ëŠ” ê·¸ê±¸ ì•Œë ¤ì£¼ì§€ ì•Šìœ¼ë©´, ì•Œ ìˆ˜ê°€ ì—†ë‹¤!!!

### static File Serving

> ststic file servingì„ í™œì„±í™” ì‹œí‚¨ë‹¤ => í´ë” ì „ì²´ë¥¼ ë¸Œë¼ìš°ì €ì—ê²Œ ë…¸ì¶œì‹œí‚¤ê² ë‹¤.

![d](/Image/Express/v18.PNG)

```js
express.static("í´ë”ëª…")
```



<br>
<br>
<br>



## Upload Video

* view

![d](/Image/Express/v19.PNG)

* middleware

![d](/Image/Express/v20.PNG)

> limits ì™¸ì— ë‹¤ë¥¸ ì†ì„±ë„ ì¡´ì¬.

* Router

![d](/Image/Express/v21.PNG)

* controller

![d](/Image/Express/v22.PNG)

* Model

![d](/Image/Express/v23.PNG)

* view

![d](/Image/Express/v24.PNG)

> controls : ì˜ìƒì¡°ì‘ ê¸°ëŠ¥ .

* dir

![d](/Image/Express/v25.PNG)
