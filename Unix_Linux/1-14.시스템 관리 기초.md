# 14. 시스템 관리 기초


## 시스템 관리자

* 시스템 관리자란?
    - 시스템이 올바로 동작할 수 있도록 시스템을 관리하고 운영하는 책임을 가진 사용자
    - 모든 권한을 가지고 있음
    - 계정 이름 : root

* 시스템 관리자의 역할
    - 사용자 등록/ 삭제
    - 각종 소프트웨어 설치, 업그레이드, 제거
    - 각종 하드웨어 추가 설치 (디스크, 프린트, 모뎀, 단말기 등)
    - 시스템 보안
    - 데이터 백업
    - 컴퓨터 자원의 감시
    - 하드웨어 / 소프트웨어 문제 발생시 진단 및 문제해결


### 관리자 계정으로 작업하기

* root 계정으로 로그인 하기
    - 로그인 이름 : root, 암호 : 시스템 설치시 지정
    - 프롬프트 : #

* root 계정으로 변경
    - 일반 계정으로 로그인 후 root로 사용자 변경
    - root 계정으로 직접 로그인하는 경우보다 안전
    - 보안을 위해 root 계정의 직접 접속을 막아놓은 경우에 사용
    - 솔라리스 11에서는 지정한 사용자만 root계정으로 su 사용가능.

```bash
$ su [-] [계정이름]
```

* root 계정의 홈디렉토리 : /root

## 부팅과 종료

* 시스템 시작하기

1. 주변 기기 전원 on
2. 시스템 하드웨어 동작 테스트 
3. 부팅장치 위치 찾음 (BootPROM phase)
4. 시스템 커널모드 (Boot program phase)
5. 커널 초기화 (kernel initialization phase)
6. /etc/init/ 실행 (init phase)
7. 로그인 창


* 시스템 종료하기

```bash
$ shutdown [옵션] [메시지]
```

* 지정한 시간이 지난 후 시스템 자동 종료
* 시스템에 접속중인 모든 사용자에게 경고음과 메시지 출력 가능
* 옵션
    - -y : 시스템 종료 여부를 재확인 하지 않음.
    - -g 시간 : 지정한 시간이 지난 후 시스템 종료.
    - -i 상태 : 지정한 상태로 변경
    - now : 즉시 종료
    - 메시지 : 시스템에 접속중인 모든 사용자에게 보낼 메시지 지정



## 사용자 관리

### 사용자 계정의 구성 요소

* 로그인 ID
    - 시스템 안에서 사용자를 구분하는 이름. 시스템 내에서 유일해야 함.
* 비밀번호 
    - 시스템 로그인 허가를 받기 위해 사용자임을 증명하는 문자열
    - 6~8 자 사이의 영문자, 숫자, 특수문자의 조합
* 홈 디렉토리
    - 로그인 한 직후 위치하는 디렉토리
    - 자신의 파일과 디렉토리 저장
* 로그인 쉘
    - 로그인 할 때 자동으로 실행되는 쉘
    - 사용자의 명령 처리
* 사용자 초기화 파일
    - 각 사용자가 자신의 작업환경을 구성하는 파일
    - 로그인 쉘이 자동 실행.


### 사용자 계정 정보 관리

> root:x:0:0:Super-user:/root:/usr/bin/bash

| root: | x: | 0: | 0: | Super-user: | /root: | /usr/bin/bash |
|-|-|-|-|-|-|-|
| 로그인 ID | 비밀번호(암호화된) | UID(0) | GID(0) | 설명 | 옴 디렉토리  | 로그인 쉘 |

### 기본 시스템 계정

| User Name | UID | description | 
|-|-|-|
|root | 0 | superuser 계정. 시스템 관리자 |
| daemon | 1 | background processiong 제어 | 
| bin | 2 | 대부분의 명령어 소유 계정 |
| sys | 3 | 시스템 파일 소유 계정 |
| adm | 4 | 관리를 위한 파일 소유 계정 | 
| lp | 71 | 프린터를 위한 파일을 소유하는 프린트 서비스 계정 |
| smtp | 0 | 메일 서비스 제공 |

* UID 
    - 시스템 내부적으로 사용자에게 부여하는 일련번호.
    - 100 ~ 65534 사이 사용.
    - 0 ~99, 60001, 60002, 655534 : 시스템 사용

* GID 
    - 사용자가 속한 기본 그룸 ID.
    - /etc/group에 정의


### 사용자 추가 : useradd

```bash
$ useradd [옵션] 로그인명
```

* 옵션
    - -D : 옵션을 지정하지 않을 때 사용하는 기본 값 출력
    - -u uid : UID 지정.
    - -g GID : 기본 그룹 지정.
    - -G GID : 보조 그룹 지정.
    - -d dir : 홈 디렉토리 지정.
    - -m : -d 옵션으로 지정한 홈 디렉토리가 없으면 생성
    - -c comment : 사용자의 이름 등을 지정
    - 로그인 ID : 사용자의 로그인 ID

### 사용자 정보 수정 : usermod

```bash
$ usermod [옵션] 로그인명
```

* 옵션
    - -u uid : UID 값을 지정한 값으로 변경
    - -g GID : GID 값을 지정한 값으로 변경
    - -d dir : 홈 디렉토리 변경
    - -s shell : 로그인 쉘 변경
    - -l 새 로그인 ID : 사용자의 로그인 ID를 변경.
    - -m : 사용자의 홈 디렉토리를 -d위치로 변경.
    - -c comment : 사용자 정보 변경

### 사용자 계정 삭제 : userdel

```bash
$ userdel [옵션] 로그인명
```

* 옵션
    - -r : 사용자의 홈 디렉토리 삭제

* 주의!
    - 사용자 삭제시 사용자가 생성한 모든 파일을 삭제하는게 좋음. 특히 기존 사용자가 중요한 사용자인 경우 반드시 삭제!!

```bash
$ find / -user uid -exec rm -r {} ₩;
```



## 그룹 관리

* 시스템이 관리하는 모든 그룹 정보 저장
* 파일 내용

> root::0:root

| root | :: | 0 | root|
|-|-|-|-|
|그룹이름|암호|그룹ID|그룹에 속한 사용자 목록|

|   필드  | 설명 |
|-|-|
| 그룹이름 | group의 이름. 로그인이름과 같아도 됨.|
| 비밀번호 | 그룹의 멤버가 아니더라도 비밀번호만 알면 그룹 소속의 파일, 디렉토리에 접근 가능. 보안을 위해 최근 사용하지 않음.
| GID | Group ID. 시스템이 각 그룹에 붙인 일련번호. |
|사용자 목록  |그룹에 속ㅎ나 사용자의 로그인 이름. 사용자의 보조그룹을 나타냄. | 


### 그룹 생성 : groupadd

```bash
$ groupadd [옵션명] 그룹명
```

* 옵션
    - -g GID : 생성한 그룹의 GID값 지정
    - -o : GID의 중복을 허용

### 그룹 수정 : groupmod

```bash
$ groupmod [옵션] 그룹명
```

* 옵션
    - -g GID : 지정한 그룹의 GID 값 수정.
    - -o : GID 중복을 허용
    - -n 새이름 : 그룹 이름을 변경

### 그룹 삭제 : groupdel

```bash
$ groupdel 그룹명
```




















