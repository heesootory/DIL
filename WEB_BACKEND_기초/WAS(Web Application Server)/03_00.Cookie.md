# Cookie



## í™•ì¸í•˜ê³  ë„˜ì–´ê°€ì•¼í•  Http Protocal íŠ¹ì§•

![http protocal](/Image/C%26S/HTTP.webp)

* ë¹„ì—°ê²°(connectioness) ì§€í–¥í˜• í†µì‹  í”„ë¡œí† ì½œ

* ì‘ë‹µ í›„ ì—°ê²°ì„ ì¢…ë£Œ(stateless)
    - ì§€ì†ì ì¸ ì—°ê²° ìœ ì§€ë¡œ ì¸í•œ ìì› ë‚­ë¹„ ë°©ì§€ë¥¼ ìœ„í•´ ì—°ê²° í•´ì œ
    - ì—°ê²°ì´ í•´ì œë˜ë©´ ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ ì •ë³´ë¥¼ ì•Œ ìˆ˜ ì—†ìŒ.
        - ì˜ˆ) ì¥ë°”êµ¬ë‹ˆì— ìƒí’ˆì„ ë‹´ì•„ ë‘ì—ˆëŠ”ë°, í˜ì´ì§€ê°€ ë°”ë€Œë©´ ì •ë³´ê°€ ì—†ì–´ì§. ë¡œê·¸ì¸ ì •ë³´ê°€ ì—†ìŒ

> ğŸš€ğŸš€ ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ Cookieì™€ HttpSessionì„ í™œìš©!!ğŸš€ğŸš€

<br>
<br>
<br>

## Cookie : javax.servlet.http.Cookie

    - ì¿ í‚¤ë„ í•˜ë‚˜ì˜ í´ë˜ìŠ¤ì´ë‹¤.
    - ì„œë²„ê°€ ìƒì„±í•˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆëŠ” íŒŒì¼ ğŸš€
    - í´ë¼ì´ì–¸íŠ¸ ì»´í“¨í„°ì— ì €ì¥ë˜ë©°, í•„ìš”ì— ë”°ë¼ ìš”ì²­ ì‹œ ì„œë²„ë¡œ ê°™ì´ ì „ì†¡. ğŸš€
    - key-value í˜•íƒœë¡œ êµ¬ì„±ë˜ë©° ë¬¸ìì—´ ë°ì´í„°.
    - ë¸Œë¼ìš°ì ¸(í´ë¼) ë³„ë¡œ ë³„ë„ì˜ ì¿ ê¸°ê°€ ìƒì„±. (ë¸Œë¼ìš°ì €ê°€ ë‹¤ë¥´ë©´ ë‹¤ë¥¸ ì‚¬ìš©ìë¡œ ì²˜ë¦¬)
    - ì„¸ì…˜ê´€ë¦¬(ì‚¬ìš©ì ì•„ì´ë””, ì ‘ì†ì‹œê°„, ì¥ë°”êµ¬ë‹ˆ ë“±)ì„ ìœ„í•´ ì‚¬ìš©.
    - ì‚¬ìš©ìë§ˆë‹¤ ë‹¤ë¥¸ í˜ì´ì§€ë¥¼ ë³´ì—¬ì¤„ ìˆ˜ ìˆë‹¤.
    - ì‚¬ìš©ìì˜ í–‰ë™ê³¼ íŒ¨í„´ì„ ë¶„ì„í•˜ê³  ê¸°ë¡í•˜ëŠ”ë° ì‚¬ìš©.(ì‚¬ìš©ìê°€ í´ë¦¬í•œ ìƒí’ˆ ê´€í˜„ ê´‘ê³  ë°°ë„ˆ)


* Cookie ë™ì‘ìˆœì„œ
    1. í´ë¼ê°€ ìš”ì²­ ìƒì„±.
    2. WASëŠ” Cookieë¥¼ ìƒì„±í•˜ê³  Http Headerì— Cookieë¥¼ ë„£ì–´ ì‘ë‹µ.
        - responseë¥¼ ì´ìš©í•´ì„œ í´ë¼ì—ê²Œ ì¿ í‚¤ë¥¼ ë³´ë‚´ì¤€ë‹¤(response.addCookie())
    3. í´ë¼(ë¸Œë¼ìš°ì €)ëŠ” ì¿ í‚¤ë¥¼ ì €ì¥, í•´ë‹¹ ì„œë²„ì— ìš”ì²­í•  ë•Œ ìš”ì²­ê³¼ í•¨ê»˜ ì¿ í‚¤ë¥¼ ì „ì†¡.
    4. ì¿ í‚¤ëŠ” ë¸Œë¼ìš°ì €ê°€ ì¢…ë£Œë˜ë”ë¼ë„ ê³„ì† ì €ì¥ë˜ê¸° ë•Œë¬¸ì—(ë§Œë£Œ ë˜ê¸° ì „ê¹Œì§€) ë™ì¼ ì‚¬ì´íŠ¸ ì¬ ë°©ë¬¸í•˜ì—¬ ìš”ì²­ ì‹œ í•„ìš”ì— ë”°ë¼ Cookieê°€ ì¬ ì „ì†¡ëœë‹¤. ğŸš€
 

> ğŸ¶ Http ì—°ê²°ì€ ë¹„ì—°ê²°ì„±ì¸ë°, ì¿ í‚¤ë¥¼ ì´ìš©í•´ì„œ ìš”ì²­ê³¼ ì‘ë‹µì— ì‹¤ì–´ì„œ ë³´ë‚´ì¤Œìœ¼ë¡œì¨ ì—°ê²°ì´ ë˜ì–´ìˆëŠ”ê±° ì²˜ëŸ¼ ë³´ì´ê²Œ í•œë‹¤!! ğŸ¶

<br>
<br>
<br>


## Cookie íŠ¹ì§•

* ì´ë¦„, ê°’, ë§Œë£Œì¼, ê²½ë¡œì •ë³´ë¡œ êµ¬ì„±.
* í´ë¼ì´ì–¸íŠ¸ì— ìµœëŒ€ 300ê°œì˜ ì¿ í‚¤ë¥¼ ì €ì¥ ê°€ëŠ¥.
* í•˜ë‚˜ì˜ ë„ë©”ì¸ë‹¹ 20ê°œì˜ ì¿ í‚¤ë¥¼ ì €ì¥.
* ì¿ í‚¤ í•˜ë‚˜ëŠ” 4KB(= 4096 byte)ì˜ ì •ë³´ë¥¼ ì €ì¥ ê°€ëŠ¥.
  - ì´ ë§ì€ ì™ ë§Œí•œ ì‚¬ì§„í•œì¥ë³´ë‹¤ë„ ìš©ëŸ‰ì´ ì‘ë‹¤ëŠ” ë§ì´ë¯€ë¡œ, ì‚¬ì§„ê°™ì€ ê²ƒì€ ì¿ í‚¤ì— ì €ì¥ë˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ë§ì´ë‹¤!! ğŸš€ğŸš€ (cf.ì´ë¯¸ì§€ëŠ” ê²½ë¡œ/ì£¼ì†Œë¡œ ì €ì¥ì„ í•œë‹¤.)
* ë”°ë¼ì„œ, ì»´í“¨í„° í•œëŒ€ë‹¹ 1.2MBì˜ ì¿ í‚¤ê°€ ì €ì¥ ê°€ëŠ¥.
* í´ë¼(ë¸Œë¼ìš°ì €)ê°€ ì¿ í‚¤ë¥¼ ì €ì¥í•˜ë¯€ë¡œ, ë¸Œë¼ìš°ì €ë§ˆë‹¤ ì¿ í‚¤ì˜ ì €ì¥ ë‚´ìš©ì€ ë‹¤ë¥´ê²Œ ëœë‹¤. -> í¬ë¡¬ì—ì„œ ì¥ë°”êµ¬ë‹ˆì— ë¬¼ê±´ì„ ë„£ì–´ë†”ë„, ì¸í„°ë„· ìµìŠ¤í”Œë¡œì–´ì—ì„œëŠ” ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì–´ìˆë‹¤!!ğŸš€ğŸš€

<br>
<br>
<br>

### ğŸ³ ì¿ í‚¤ì˜ ì˜ˆì‹œ

> (ë¡œê·¸ì¸ì„ í•˜ì§€ ì•Šì•„ë„)ì¿ íŒ¡ì˜ ì¥ë°”êµ¬ë‹ˆì— íœ´ì§€ë¥¼ ë‹´ê³ , í˜ì´ì§€ë¥¼ ì´ë™í•´ì„œ ìŠ¤í‚¨í˜ì´ì§€ë¡œ ê°„ë‹¤.

> ìŠ¤í‚¨í˜ì´ì§€ë¡œ ì´ë™í•´ë„, ì¿ í‚¤ê°€ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì—, ì¥ë°”êµ¬ë‹ˆì—ëŠ” íœ´ì§€ê°€ ë‹´ê²¨ì ¸ìˆë‹¤.

> í˜ì´ì§€ ì´ë™ì´ë¼ëŠ”ê±°ëŠ” ê²°êµ­ í´ë¼ì—ì„œ ì„œë²„ìª½ìœ¼ë¡œ í˜ì´ì§€ë¥¼ ìš”ì²­í•´ì„œ ëŒì•„ì˜¨ ê²°ê³¼ë¬¼ì¸ë°,  

<br>
<br>
<br>



## ğŸŒˆ ì¿ í‚¤ì— ì €ì¥ë  ë°ì´í„°ë€?? (DBì— ì €ì¥ë˜ëŠ” ê²ƒê³¼ êµ¬ë³„í•´ë³´ì)

* ë³€ë™ì´ ì‹¬í•œ ì €ì¥ ë°ì´í„°ë¥¼ ë³´í†µ ì¿ í‚¤ì— ì €ì¥í•œë‹¤.
    - ì¥ë°”êµ¬ë‹ˆ

* ë³€ë™ì´ ì‹¬í•˜ì§€ ì•Šì€ ë°ì´í„°ë¥¼ DBì— ì €ì¥.
    - ì°œ ëª©ë¡.
    - ì‚¬ìš©ì ì •ë³´.


<br>
<br>
<br>

## Cookie ìƒì„± ë° ì¶”ê°€

* ì¿ í‚¤ ìƒì„± : javax.servlet.http.Cookie(java.lang.String name, java.lang.String value) -> í‚¤, ê°’
```java
Cookie cookie = new Cookie("userid", "ssafy");
```

* ì¿ í‚¤ ì‘ë‹µ ì¶”ê°€ : void javax.servlet.http.HttpServletResponse.addCookie(Cookie cookie)
```java
response.addCookie(cookie);
// ì¿ í‚¤ëŠ” ì‘ë‹µì— ë‹´ì•„ì„œ ë³´ë‚¸ë‹¤!!
```

### ğŸ³ ì¿ í‚¤ ë°›ëŠ”ê²Œ í—·ê°ˆë¦¼!!! ğŸ³

* ì¿ í‚¤ëŠ” í‚¤:ë°¸ë¥˜ ê°’ìœ¼ë¡œ ì €ì¥ë˜ì–´ìˆëŠ” ê°ì²´ ì´ê³ , ë°›ì„ë•ŒëŠ” ì¿ í‚¤ë“¤ì˜ ë°°ì—´ë¡œ ë°›ì•„ì•¼ í•œë‹¤.

* ë˜ ì¿ í‚¤ëŠ” í´ë¼ì…ì¥ì—ì„œëŠ” ìš”ì²­ì—ë§Œ ë“¤ì–´ìˆê¸° ë•Œë¬¸ì—, requestê°ì²´ì—ì„œ ì°¾ì•„ì•¼ í•œë‹¤!!

```jsp
Cookie[] cookies = request.getCookies();
```


<details>
<summary>ì¿ í‚¤ ì‹¤ìŠµ</summary>
<div markdown="1">

```java
package com.ssafy.cookie;

import java.io.IOException;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.Cookie;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

//ì„œë¸”ë¦¿ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œ ì‹œí‚¤ê³  
//ì¿ í‚¤ë¥¼ í•œë²ˆ ë§Œë“¤ì–´ ë³´ì.

@WebServlet("/make")
public class MakeCookie extends HttpServlet{
	@Override
	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		String key = request.getParameter("key");
		String value = request.getParameter("value");
		
		
		//ì¿ í‚¤ë¥¼ ìƒì„±í•˜ì.
		Cookie cookie = new Cookie(key, value);
		
		//ìœ íš¨ì‹œê°„ (ë§Œë£Œê¸°ê°„) ì´ˆë‹¨ìœ„
		cookie.setMaxAge(60); //1ë¶„
		
		//ì¿ í‚¤ë¼ê³  í•˜ëŠ”ê²ƒì€ ì§ì ‘ ìš°ë¦¬ê°€ ì„¤ì •ìœ¼ë¡œ ì§€ìš¸ ìˆ˜ëŠ” ì—†ì„ê¹Œ?
//		cookie.setMaxAge(0); //ì´ë ‡ê²Œ ì“°ëŠ” ê²ƒì´ ì¿ í‚¤ ì‚­ì œì™€ ë™ì¼í•˜ë‹¤.
		
		response.addCookie(cookie);
		
		//ì„¸ì…˜ ê°€ì ¸ì˜¤ê¸°
		HttpSession session = request.getSession();
		session.setAttribute("name", "hello");
		
		response.sendRedirect("cookie1.jsp");
	}	
}
```

```jsp
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<h2>í˜„ì¬ ë‚´ ë¸Œë¼ìš°ì € ì•ˆì— ìˆëŠ” ì¿ í‚¤ì •ë³´</h2>
	<hr>
	<%
		Cookie[] cookies = request.getCookies();
		if(cookies != null){
			for(Cookie c : cookies){
				String key = c.getName();
				String value = c.getValue();
				%>
				<h3><%=key %>: <%=value %></h3>
				<%
			}
		}else{
			out.print("ì„¤ì •ëœ ì¿ í‚¤ê°€ ì—†ë‹¤.");
		}
	%>


	<h2>ì¿ í‚¤ì„¤ì •</h2>
	<form action="make" method="get">
		ì´ë¦„ : <input type="text" name="key"> <br>
		ê°’   : <input type="text" name="value"> <br>
		<input type="submit" value="ì¿ í‚¤ìƒì„±">	
	</form>
</body>
</html>
```

</div>
</details>



<br>
<br>
<br>

## âœˆï¸ ì¿ í‚¤ í—·ê°ˆë¦¬ëŠ” ì  ì •ë¦¬.

* ì¿ í‚¤ëŠ” ì²˜ìŒ í•´ë‹¹ ì‚¬ì´íŠ¸ë¡œ ë“¤ì–´ì˜¨ ì‚¬ìš©ìì—ê²Œ ë§Œë“¤ì–´ì„œ í˜ì´ì§€ì™€ í•¨ê»˜ ì‘ë‹µì— ë„£ì–´ ë³´ë‚´ì¤€ë‹¤.
    - ì²« ì¿ í‚¤ ìƒì„±ì‹œ ì¤„ë•Œë§Œ ì‘ë‹µì— ë‹´ì•„ì„œ ë³´ëƒ„.

* í´ë¼ì…ì¥ì—ì„œëŠ” ìš”ì²­ë°–ì—ì—†ê¸° ë•Œë¬¸ì— í•­ìƒ ìš”ì²­ì—ì„œ ì¿ í‚¤ë¥¼ ì°¾ì•„ì•¼í•œë‹¤.
    - ìš”ì²­ì—ì„œ êº¼ë‚¸ ì¿ í‚¤ëŠ” ë°°ì—´ì˜ í˜•íƒœ!

* ì²« ì¿ í‚¤ìƒì„± ì´í›„ë¡œëŠ”, ì„œë²„ ë˜í•œ ìš”ì²­ì—ì„œë§Œ ì¿ í‚¤ì •ë³´ë¥¼ ë³´ê³  í˜ì´ì§€ë¥¼ ê°±ì‹ í•˜ì—¬ ì‘ë‹µìœ¼ë¡œ í˜ì´ì§€ë§Œ ë§Œë“¤ì–´ ë³´ë‚´ì¤€ë‹¤.

* ì²« ì¿ í‚¤ë¥¼ ì‘ë‹µì´ í´ë¼ì— ì „ë‹¬í•˜ëŠ” ê²ƒê³¼, í´ë¼ì—ì„œ ìš”ì²­ì— ì¿ í‚¤ë¥¼ ì‹£ëŠ”ê²ƒì€ ì•„ì§ ìë™ìœ¼ë¡œ ë˜ëŠ”ê²ƒ ì²˜ëŸ¼ ë³´ì¸ë‹¤.(ì‹¬í™” ê³µë¶€ê°€ í•„ìš”.)

### ğŸ¯ ìš”ì•½ 
> ì¿ í‚¤ëŠ” ì²« ìƒì„±ì‹œì—ë§Œ, ì‘ë‹µì— ë‹´ê²¨ ë³´ë‚´ì§€ê³ , ê·¸ ì´í›„ë¡œëŠ” í´ë¼ì™€ ì„œë²„ ëª¨ë‘ ìš”ì²­ì—ì„œ ì°¾ì•„ ì‚¬ìš©í•œë‹¤.

> ì¿ í‚¤ëŠ” ë°°ì—´ì˜ í˜•íƒœë¡œ requestì— ë‹´ê¸´ë‹¤.






























