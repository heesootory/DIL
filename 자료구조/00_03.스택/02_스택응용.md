# 스택 응용


## Function call

* 프로그램에서의 함수 호출과 복귀에 따른 수행 순서를 관리.
    - 가장 마지막에 호출된 함수가 가장 먼저 실행을 완료하고 복귀하는 후입 선출 구조이므로, 후입 선출 구조의 스택을 이용하여 수행 순서를 관리.
    - 함수 호출이 발생하면 호출한 함수 수행에 필요한 지역변수, 매개변수 및 수행 후 복귀할 주소등의 정보를 스택 프레임에 저장하여 시스템 스택에 삽입.
    - 함수의 실행이 끝나면 시스템 스택의 top원소(스택 프레임)를 삭제(pop)하면서 프레임에 저장되어 있던, 복귀 주소를 확인하고 복귀
    - 함수 호출과 복귀에 따라 이 과정을 반복하여 전체 프로그램 수행이 종료되면 시스템 스택은 공백 스택이 됨.




## 계산기

### 문자열로 된 계산식이 주어질 때, 스택을 이용하여 이 계산식의 값을 계산할 수 있다.


### 중위 표기법(infix notation)
* 연산자를 피연산자의 가운데 표기하는 방법
    - A + B


### 후위 표기법(postfix notation)
* 연산자를 피연산자 뒤에 표기하는 방법
    - AB +


### 문자열 수식 계산의 일반적 방법

* step1. 중위 표기법의 수식을 후위 표기법으로 변경. (스택 이용)
* step2. 후위 표기법의 수식을 스택을 이용하여 계산.


#### step1. 중위표기식의 후위표기식 변환 방법1
* 수식의 각 연산자에 대해서 우선순위에 따라 괄호를 사용하여 다시 표현.
* 각 연산자를 그에 대응하는 오른쪽괄호의 뒤로 이동.
* 괄호를 제거.

<pre>
    ex)  A * B - C / D

    
    1단계 : 우선순위에 맞게 괄호를 씌운다.
            ((A*B) - (C/D))

    2단계 : 괄호에 해당하는 연산자를 괄호 뒤로 보낸다.
            ((A B)* (C D)/)-

    3단계 : 괄호를 지운다.
            A B * C D / -

</pre>


#### step2. 중위 표기법에서 후위 표기법으로의 변환 알고리즘(스택 이용)

1. 입력 받은 중위 표기식에서 토큰을 읽는다.
2. 토큰이 피연산자이면 토큰을 출력
3. 토큰이 연산자(괄호포함)일 떄, 이 토큰이 스택의 top에 저장되어 있는 연산자보다 우선순위가 높으면 스택에 push하고, 그렇지 않다면 스택 top의 연산자의 우선순위가 토큰의 우선순위보다 작을 때까지 스택에서 pop한 후 토큰의 연산자를 push한다. 만약 top에 연산자가 없으면 push한다.
4. 토큰이 오른쪽 괄호')'이면 스택 top에 왼쪽 괄호 ')'가 올 때까지 스택에 pop연산을 수행하고 pop한 연산자를 출력. 왼쪽 괄호를 만나면 pop만 하고 출력하지는 않는다.
5. 중위 표기식에 더 읽을 것이 없다면 중지하고, 더 읽을 것이 있다면 1부터 다시 반복.
6. 스택에 남아 있는 연산자를 모두 pop하여 출력
    - 스택 밖의 왼쪽 괄호는 우선순위가 가장 높으며, 스택 안의 왼쪽 괄호는 우선순위가 가장 낮다.


#### 코드 구현

[백준 - 1918. 후위 표기식 참고](https://www.acmicpc.net/problem/1918)
<br>
  

* 스택에는 연산자가 저장된다!
* 연산자와 괄호마다 우선순위가 존재한다!! (스택안과 밖에서 그 순위가 다름)
* 연산끼리 비교해서, 우선순위가 높으면 스택에 저장한다.
* 괄호'('는 스택에 저장하고, 괄호')'를 만나면 괄호 '('이 나올때 까지 스택에서 pop한다.

> 다음의 중위 표기법을 후위 표기법을 바꿔보자. 
   
>   (6 + 5 * (2 - 8) / 2)

>  6 5 2 8 - * 2 / + 

|부호 | 스택 안| 스택 밖|
|-|-|-|
| ( | 0 | 3 |
|* , / | 2 | 2 |
|+ , - | 1 | 1 |

> ) 는 따로 우선순위 x.






#### step2. 후위 표기법의 수식을 스택을 이용하여 계산.

[백준 - 1935. 후위 표기식2 참고](https://www.acmicpc.net/problem/1935)

1. 피연산자를 만나면 스택에 push한다.
2. 연산자를 만나면 필요한 만큼의 피연산자를 스택에서 pop하여 연산하고, 연산결과를 다시 스택에 push한다.
3. 수식이 끝나면, 마지막으로 스택을 pop하여 출력.


* 이번엔 스택에 피연산자를 저장.


>  6 5 2 8 - * 2 / + 

>  









