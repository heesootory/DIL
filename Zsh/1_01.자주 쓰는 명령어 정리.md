# 명령어 정리

<Br>
<Br>

<hr>
<br>

## 🐳 Docker

* root 계정으로 도커 컨테이너 실행(bash쉘로 실행)

```zsh
$ exec -u 0 -it [container name] bash
```










<Br>
<hr>
<br>

## 🐳 Spring boot 

* 빌드하지 않고, 그냥 spring 프로젝트 실행(maven 사용시)
    - mvnw만 있다면, maven 프로젝트를 실행하게 해줌.
        - mvnw.cmd는 윈도우용 / mvnw.sh는 맥용
    - SNAPSHOT파일이 없다면 패키징이 아직 안된것.
```zsh
$ mvn spring-boot:run
```

* 이미존재하는 build파일 삭제 -> compile -> build 한번에 진행
```zsh
$ mvn clean compile package
```



<br>
<br>
<hr>
<br>
<br>


## 🐳 Server

* 현재 사용중인 프로세스 확인

```zsh
$ netstat
```

* 특정 포트 번호로 프로세스 확인
    - :과 포트번호를 띄워쓰면 안됨.
```zsh
$ sudo lsof -i :[port]
```

* 특정 포트 프로세스 죽이기

```zsh
$ sudo kill -9 [PID]
```



<br>
<br>
<br>

## 🐳 MariaDB

* 설치

```zsh
$ brew install mariadb
```


* 시작, 종료, 상태확인
    - mariaDB 는 mysqlDB와 코어가 같으므로, mysql 명령어를 사용.

```zsh
$ mysql.server start
```
```zsh
$ mysql.server stop
```
```zsh
$ mysql.server status
```


* 접속

    - -p: 패스워드 입력해서 들어가기

```zsh
$ mysql -uroot
$ mysql -uroot -p  
```

* 데이터베이스 생성

```zsh
mysql> create database mydb;
```

* 🔥 root계정으로 접속할시, Access denied 발생시 🔥

```zsh
$ sudo mysql -u root
mysql> use mysql;
mysql> select user,host,plugin FROM mysql.user;
mysql> set password for 'root'@'localhost'=password('test1234');
mysql> flush privileges;
```

* 스키마 확인

```zsh
mysql> show databases;
```





## 🐳 Kafka

* kafak zookepeer 실행
    - kafka 폴더 내에서 실행
```zsh
$ ./bin/zookeeper-server-start.sh ./config/zookeeper.properties
```

* kafka 서버 실행
    - kafka 폴더 내에서 실행
```zsh
$ ./bin/kafka-server-start.sh ./config/server.properties
```

* connect 실행
    - kafka/confluent-6.1.0 에서 실행

```zsh
$ ./bin/connect-distributed ./etc/kafka/connect-distributed.properties
```

* 현재 실행되고 있는 topic의 목록 확인
    - kafka 폴더 내에서 실행
```zsh
$ ./bin/kafka-topics.sh --bootstrap-server localhost:9092 --list
```

* topic 실행하기
    - 이름 설정.
    - partitions 1 : 파티션 갯수는 1개.

```zsh
$ ./bin/kafka-topics.sh --bootstrap-server localhost:9092 --create --topics [topic 이름] --partitions 1
```

* 실행되고 있는 topic 자세히 보기
    - kafka 폴더 내에서 실행
```zsh
$ ./bin/kafka-topics.sh --bootstrap-server localhost:9092 --describe --topic [topic 이름]
```

* producer 실행
    - kafka 폴더 내에서 실행
```zsh
$ ./bin/kafka-console-producer.sh --broker-list localhost:9092 --topic [topic 이름]
```


* consumer 실행
    - kafka 폴더 내에서 실행
```zsh
$ ./bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic [topic 이름] --from-beginning
```

* connect 실행
    - cofluent 폴더 내에서 실행
    - 실행 후 topic 리스트를 확인해 보면, connect에 관련된 3가지 topic이 추가된걸 볼 수 있다.

```zsh
$ ./bin/connect-distributed.bat . /etc/kafka/connect-distributed.properties
```

* jdbc connecter 
    #### 1. jdbc-connect 설정
    - confluentinc-kafka-connect-jdbc-10.6.1.zip 다운.
    - /Users/heesoo/kafka/confluentinc-kafka-connect-jdbc-10.6.1/lib/kafka-connect-jdbc-10.6.1.jar 
        - 이 파일을 사용해야 하기 때문에, 카프카 시작될때 실행되는 설정파일에 경로를 설정하자.
    - /Users/heesoo/kafka/confluent-6.1.0//etc/kafka/connect-distributed.properties
        - 이 설정파일의 plugin.path 에 "/Users/heesoo/kafka/confluentinc-kafka-connect-jdbc-10.6.1/lib"(위 디렉토리 경로)로 설정

    #### 2. maria-java-client.jar 파일 -> kafka 폴더로 복사.
    ```zsh
    $ cp ./mariadb-java-client-2.7.3.jar /Users/heesoo/kafka/confluent-6.1.0/share/java/kafka
    ```

    - 현재 사용하고 있는 h2DB 의 m2폴더 아래에 있는 mariadb-java-client-2.7.3.jar 파일을 confluent 아래의 kafka 폴더로 복사.

