# ëª…ë ¹ì–´ ì •ë¦¬

<Br>
<Br>

<hr>
<br>


## m1 ìŠ¤í¬ë¦°ìƒ· ê¸°ë³¸ ê²½ë¡œ ë°”ê¾¸ê¸°

```zsh
defaults write com.apple.screencapture location [ì €ì¥í•  ê²½ë¡œ/í´ë” ë“œë˜ê·¸ ê°€ëŠ¥]
```



## ğŸ³ Docker

* run ëª…ë ¹ì–´ êµ¬ì¡°

```zsh
$ docker run [OPTIONS] IMAGE[:TAG|@DIGEST] [COMMEND][ARG...] 
```

| ì˜µì…˜ | ì„¤ëª… |
|-|-|
|-d | detached mode => ë°±ê·¸ë¼ìš´ë“œ ëª¨ë“œ|
|-p | hostì™€ containerì˜ í¬íŠ¸ë¥¼ ì—°ê²°(í¬íŠ¸ í¬ì›Œë”©)|
|-v | hostì™€ containerì˜ ë””ë ‰í† ë¦¬ë¥¼ ì—°ê²° (ë³¼ë¥¨ ë§ˆìš´íŠ¸)|
|-e | containerë‚´ì—ì„œ ì‚¬ìš©í•  í™˜ê²½ë³€ìˆ˜ ì„¤ì • |
|--name | ì»¨í…Œì´ë„ˆì˜ ì´ë¦„ ì„¤ì •|
|--rm | í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œì‹œ container ìë™ ì œê±°|
|--it | -i(interative)ì™€ -t(tty)ë¥¼ ë™ì‹œì— ì‚¬ìš©í•œ ê²ƒ => í•´ë‹¹ container í„°ë¯¸ë„ë¡œ ì ‘ì†í•˜ê¸° ìœ„í•œ ì˜µì…˜|
|--link | container ì—°ê²°
|--network| docker network ê·¸ë£¹ìœ¼ë¡œ ì†í•˜ê²Œ ì—°ê²° |

```zsh
$ docker run -d -p 8080:8080 --network eccomerce-network\
             -e "spring.cloud.config.uri=http://config-server:8888"\
             --name apigateway-service\
             heesootory/apigateway-service
```

> -d : ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰<br>
> -p : í¬íŠ¸í¬ì›Œë”© 8080:8080<br>
> --network: docker-network ê·¸ë£¹ëª…ì€ "eccomerce-network"<br>
> -e : í•´ë‹¹ ì´ë¯¸ì§€ì˜ í™˜ê²½ ì„¤ì •íŒŒì¼(yml, config)ì˜ ë³€ìˆ˜ë¥¼ ë³€ê²½(ì„¤ì •)<br>
> --name : docker í”„ë¡œì„¸ìŠ¤ ëª…ì„ "apigateway-service" ë¡œ  ì„¤ì •
> heesootory/apigateway-service: containerë¥¼ ë§Œë“¤ ì´ë¯¸ì§€ ëª….


* container ìƒì„±, ì‹¤í–‰, ì¤‘ì§€, ì‚­ì œ
    - ì‚­ì œëŠ” containerê°€ ì‹¤í–‰ì¤‘ì—ëŠ” ë¶ˆê°€. ì¤‘ì§€ í›„ì— ì‚­ì œ ê°€ëŠ¥.

```zsh
$ docker create [imageì´ë¦„]
$ docker start [imageì´ë¦„]
$ docker stop [imageì´ë¦„]
$ docker rm [imageì´ë¦„]
$ docker run [imageì´ë¦„]    // pull + create + start
```

* docker image ì‚­ì œ
    - ì‚­ì œì‹œì—ëŠ” imageì˜ ID ì…ë ¥.
```zsh
$ docker rmi [image ID]
```

* container log í™•ì¸
```zsh
$ docker logs [containerëª…]
```

* container í„°ë¯¸ë„ë¡œ ì›ê²©ì ‘ì†
    - ì•„ë˜ëŠ” bashì‰˜ì„ ì‚¬ìš©ì‹œ, ë‹¤ë¥¸ ì‰˜ë„ ê°€ëŠ¥.
    - -it: ì ‘ì†í•˜ì—¬ í¬ê·¸ë¼ìš´ë“œë¡œ ìœ ì§€
    - --privileged: ê´€ë¦¬ì ê¶Œí•œìœ¼ë¡œ ì‹¤í–‰.

```zsh
$ docker exec -it --privileged [containerëª…] /bin/bash
```

* docker image/ container ëª©ë¡ í™•ì¸

```zsh
$ docker image ls
$ docker images

$ docker container ls
$ docker containers
```

* docker imageë¥¼ pullë§Œí•œ ìƒíƒœ, containerë¡œ ì‹¤í–‰ì€ ì•„ì§ ì•ˆí–ˆê±°ë‚˜, container ì‹¤í–‰ì„ ì¢…ë£Œí•œ ìƒíƒœ ëª©ë¡ í™•ì¸
    - (vm ì„ ì¼œë†“í‚¤ë§Œ í•˜ê³ , ì‹œì‘ì„ ì•ˆëˆŒë¦°ìƒíƒœ? ë¡œ ìƒê°)
```zsh
$ docker container ls -a
$ docker ps -a
```

* containerê°€ ì‹¤í–‰ì¤‘ì¸ ëª©ë¡ í™•ì¸
    - (vm ì„ ì¼œê³ , ì‹œì‘ë„ ëˆ„ë¥¸ ìƒíƒœ??ë¡œ ìƒê°)
    - dockerì— ì˜¬ë¼ê°„ í”„ë¡œì„¸ìŠ¤ ëª©ë¡ í™•ì¸
```zsh
$ docker container ls
$ docker ps
```

* root ê³„ì •ìœ¼ë¡œ ë„ì»¤ ì»¨í…Œì´ë„ˆ ì‹¤í–‰(bashì‰˜ë¡œ ì‹¤í–‰)

```zsh
$ exec -u 0 -it [container name] bash
```

* build ëª…ë ¹
    - í•´ë‹¹ targetì´ ì¡´ì¬í•˜ëŠ” ë””ë ‰í† ë¦¬ì—ì„œ ì‹¤í–‰
    - -t : --tag => imageëª…ì„ ì¤„ ì˜µì…˜
    - ğŸ¯ ì—¬ê¸°ì„œ ê°€ì¥ ì¤‘ìš”í•œ ê±´ ë§¨ ë§ˆì§€ë§‰ì— ë¶™ì—¬í•˜ëŠ” ì (.)ì´ë‹¤~!!!!ğŸ¯
    - buildë¥¼ í•˜ë©´ ì¼ë‹¨ localì— imageê°€ ìƒì„± 
    - ì¶”í›„, push : docker hubìœ¼ë¡œ ì˜¬ë¦¬ê¸° / run : container ë°”ë¡œ ìƒì„± í›„ ì‹¤í–‰.

```zsh
$ docker build -t [imageëª…] .
```










<Br>
<hr>
<br>

## ğŸ³ Spring boot 

<br>

### ğŸ‹ ë²„ì ¼ê´€ë¦¬ 
<br>

#### ğŸŠ maven ì‚¬ìš©ì‹œ.

* ë¹Œë“œí•˜ì§€ ì•Šê³ , ê·¸ëƒ¥ spring í”„ë¡œì íŠ¸ ì‹¤í–‰(maven ì‚¬ìš©ì‹œ)
    - mvnwë§Œ ìˆë‹¤ë©´, maven í”„ë¡œì íŠ¸ë¥¼ ì‹¤í–‰í•˜ê²Œ í•´ì¤Œ.
        - mvnw.cmdëŠ” ìœˆë„ìš°ìš© / mvnw.shëŠ” ë§¥ìš©
    - SNAPSHOTíŒŒì¼ì´ ì—†ë‹¤ë©´ íŒ¨í‚¤ì§•ì´ ì•„ì§ ì•ˆëœê²ƒ.
    ```zsh
    $ mvn spring-boot:run
    ```

* ì´ë¯¸ì¡´ì¬í•˜ëŠ” buildíŒŒì¼ ì‚­ì œ -> compile -> build í•œë²ˆì— ì§„í–‰
    - -DskipTests=true : testê°€ ì•„ì§ ì—†ëŠ” ìƒíƒœì—ì„œ packageë¥¼ í•˜ë©´ ì—ëŸ¬ê°€ ë‚ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, testë¥¼ ìŠ¤í‚µí•œë‹¤ëŠ” ì˜µì…˜
    - package ëœ .jar(ìë°” ì••ì¶•íŒŒì¼ = íŒ¨í‚¤ì§€ íŒŒì¼)ì´ ìƒì„±ë¨.
    ```zsh
    $ mvn clean compile package
    $ mvn clean compile package -DskipTests=true
    ```

#### ğŸŠ gradle ì‚¬ìš©ì‹œ.

```java
// gradlew ì´ ì¡´ì¬í•˜ëŠ” ë””ë ‰ì—ì„œ
$ ./gradlew clean build
```


<br>
<br>
<br>

#### ğŸŠ jar íŒŒì¼ ì‹¤í–‰.

```zsh
$ java -jar [íŒŒì¼ëª…]
```



<br>
<br>
<hr>
<br>
<br>


## ğŸ³ Server

* í˜„ì¬ ì‚¬ìš©ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ í™•ì¸

```zsh
$ netstat
```

* íŠ¹ì • í¬íŠ¸ ë²ˆí˜¸ë¡œ í”„ë¡œì„¸ìŠ¤ í™•ì¸
    - :ê³¼ í¬íŠ¸ë²ˆí˜¸ë¥¼ ë„ì›Œì“°ë©´ ì•ˆë¨.
```zsh
$ sudo lsof -i :[port]
```

* íŠ¹ì • í¬íŠ¸ í”„ë¡œì„¸ìŠ¤ ì£½ì´ê¸°

```zsh
$ sudo kill -9 [PID]
```



<br>
<br>
<br>

## ğŸ³ MariaDB / MySql

* ì„¤ì¹˜

```zsh
$ brew install mariadb
```


* ì‹œì‘, ì¢…ë£Œ, ìƒíƒœí™•ì¸
    - mariaDB ëŠ” mysqlDBì™€ ì½”ì–´ê°€ ê°™ìœ¼ë¯€ë¡œ, mysql ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©.

```zsh
$ mysql.server start
```
```zsh
$ mysql.server stop
```
```zsh
$ mysql.server status
```


* ì ‘ì†

    - -p: íŒ¨ìŠ¤ì›Œë“œ ì…ë ¥í•´ì„œ ë“¤ì–´ê°€ê¸°

```zsh
$ mysql -uroot
$ mysql -uroot -p  
```

* ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±

```zsh
mysql> create database mydb;
```

* ğŸ”¥ rootê³„ì •ìœ¼ë¡œ ì ‘ì†í• ì‹œ, Access denied ë°œìƒì‹œ ğŸ”¥

```zsh
$ sudo mysql -u root
mysql> use mysql;
mysql> select user,host,plugin FROM mysql.user;
mysql> set password for 'root'@'localhost'=password('test1234');
mysql> flush privileges;
```

* ê¶Œí•œ ì„¤ì •
    - root ë¼ëŠ” ê³„ì •ì˜ ì–´ë–¤ ipì£¼ì†Œë¡œ(%) ì ‘ì†ëœë‹¤ í•˜ë”ë¼ë„, ì ‘ê·¼ì„ í—ˆìš©í•˜ê² ë‹¤. (ë¹„ë²ˆì€ bmg930813ìœ¼ë¡œ ëª¨ë‘ ì ‘ì† ê°€ëŠ¥.)

```zsh
> grant all privileges on *.* to 'root'@'%' identified by 'bmg930813';
> flush privileges;     //ìœ„ì˜ ì‘ì—…ì„ ë°”ë¡œ ë°˜ì˜í•´ë¼.
```

* ìŠ¤í‚¤ë§ˆ í™•ì¸

```zsh
mysql> show databases;
```

* maria db ì„œë²„ë¡œ ì ‘ì†í•˜ê¸°
    - bashì‰˜ë¡œ ì‹¤í–‰.
    - -p: ë¹„ë°€ë²ˆí˜¸ ì‚¬ìš©í•´ì„œ ì ‘ì†í•˜ê² ë‹¤.
```zsh
# mysql -hlocalhost -uroot -p
```






## ğŸ³ Kafka

* kafak zookepeer ì‹¤í–‰
    - kafka í´ë” ë‚´ì—ì„œ ì‹¤í–‰
```zsh
$ ./bin/zookeeper-server-start.sh ./config/zookeeper.properties
```

* kafka ì„œë²„ ì‹¤í–‰
    - kafka í´ë” ë‚´ì—ì„œ ì‹¤í–‰
```zsh
$ ./bin/kafka-server-start.sh ./config/server.properties
```

* connect ì‹¤í–‰
    - kafka/confluent-6.1.0 ì—ì„œ ì‹¤í–‰

```zsh
$ ./bin/connect-distributed ./etc/kafka/connect-distributed.properties
```

* í˜„ì¬ ì‹¤í–‰ë˜ê³  ìˆëŠ” topicì˜ ëª©ë¡ í™•ì¸
    - kafka í´ë” ë‚´ì—ì„œ ì‹¤í–‰
```zsh
$ ./bin/kafka-topics.sh --bootstrap-server localhost:9092 --list
```

* topic ì‹¤í–‰í•˜ê¸°
    - ì´ë¦„ ì„¤ì •.
    - partitions 1 : íŒŒí‹°ì…˜ ê°¯ìˆ˜ëŠ” 1ê°œ.

```zsh
$ ./bin/kafka-topics.sh --bootstrap-server localhost:9092 --create --topics [topic ì´ë¦„] --partitions 1
```

* ì‹¤í–‰ë˜ê³  ìˆëŠ” topic ìì„¸íˆ ë³´ê¸°
    - kafka í´ë” ë‚´ì—ì„œ ì‹¤í–‰
```zsh
$ ./bin/kafka-topics.sh --bootstrap-server localhost:9092 --describe --topic [topic ì´ë¦„]
```

* producer ì‹¤í–‰
    - kafka í´ë” ë‚´ì—ì„œ ì‹¤í–‰
```zsh
$ ./bin/kafka-console-producer.sh --broker-list localhost:9092 --topic [topic ì´ë¦„]
```


* consumer ì‹¤í–‰
    - kafka í´ë” ë‚´ì—ì„œ ì‹¤í–‰
```zsh
$ ./bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic [topic ì´ë¦„] --from-beginning
```

* connect ì‹¤í–‰
    - cofluent í´ë” ë‚´ì—ì„œ ì‹¤í–‰
    - ì‹¤í–‰ í›„ topic ë¦¬ìŠ¤íŠ¸ë¥¼ í™•ì¸í•´ ë³´ë©´, connectì— ê´€ë ¨ëœ 3ê°€ì§€ topicì´ ì¶”ê°€ëœê±¸ ë³¼ ìˆ˜ ìˆë‹¤.

```zsh
$ ./bin/connect-distributed.bat . /etc/kafka/connect-distributed.properties
```

* jdbc connecter 
    #### 1. jdbc-connect ì„¤ì •
    - confluentinc-kafka-connect-jdbc-10.6.1.zip ë‹¤ìš´.
    - /Users/heesoo/kafka/confluentinc-kafka-connect-jdbc-10.6.1/lib/kafka-connect-jdbc-10.6.1.jar 
        - ì´ íŒŒì¼ì„ ì‚¬ìš©í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì—, ì¹´í”„ì¹´ ì‹œì‘ë ë•Œ ì‹¤í–‰ë˜ëŠ” ì„¤ì •íŒŒì¼ì— ê²½ë¡œë¥¼ ì„¤ì •í•˜ì.
    - /Users/heesoo/kafka/confluent-6.1.0//etc/kafka/connect-distributed.properties
        - ì´ ì„¤ì •íŒŒì¼ì˜ plugin.path ì— "/Users/heesoo/kafka/confluentinc-kafka-connect-jdbc-10.6.1/lib"(ìœ„ ë””ë ‰í† ë¦¬ ê²½ë¡œ)ë¡œ ì„¤ì •

    #### 2. maria-java-client.jar íŒŒì¼ -> kafka í´ë”ë¡œ ë³µì‚¬.
    ```zsh
    $ cp ./mariadb-java-client-2.7.3.jar /Users/heesoo/kafka/confluent-6.1.0/share/java/kafka
    ```

    - í˜„ì¬ ì‚¬ìš©í•˜ê³  ìˆëŠ” h2DB ì˜ m2í´ë” ì•„ë˜ì— ìˆëŠ” mariadb-java-client-2.7.3.jar íŒŒì¼ì„ confluent ì•„ë˜ì˜ kafka í´ë”ë¡œ ë³µì‚¬.

