# useRef 





## 개념 & 역할

* state와 같이 저장공간의 역할.
    - state가 변화시, 렌더링이 다시 되게되고, 컴포넌트 내부 변수들이 초기화됨.
    - Ref가 변화시에는 렌더링이 되지 않고, 변수들의 값이 유지됨. -> 불필요한 렌더링 방지.
    - State의 변화시, 렌더링이 되도, Ref의 값은 유지됨.

* DOM요소에 접근
    - 대표 예) 마우스를 대지 않아도, focus가 되는 input창.


* 예시 코드

```js
import {useState, useRef} from 'react';

function App() {
  const [count, setCount] = useState(0);
  const countRef = useRef(0);

  console.log(countRef);
  console.log("렌더링!");

  const increaseCountState = () => {
    setCount(count + 1);
  }

  const increaseCountRef = () => {
    countRef.current = countRef.current + 1;
    console.log("Ref: ", countRef.current)
  }

  return (
    <div className="App">
      <p>State: {count}</p>
      <p>Ref: {countRef.current}</p>
      <button onClick={increaseCountState}>State 올려</button>
      <button onClick={increaseCountRef}>Ref 올려</button>
    </div>
  );
}

export default App;

```

> "Ref 올려" 버튼은 눌려도 렌더링이 되지않기 때문에 내부적으로만 카운트가 올라가고, "State 올려"버튼을 눌려 컴포넌트가 비로소 렌더링될 때, Ref숫자도 누른만큼 렌더링되게 됨.


<br>
<br>
<br>


### 어디다 사용할까??

* 자주 변경되는 값에 사용.
    - state에 다가 자주 변경되는 값을 저장할 시, 변경시마다 렌더링되므로, 성능 저하가 발생!.
    - Ref에 저장하면, 성능에 지장없이 변경되는 값을 기록한다!


* 일반 변수랑 무슨 차이일까??
    - 일반변수는 컴포넌트가 렌더링될시, 초기화 되지만, Ref에 저장된 값은 컴포넌트가 마운트된 이후로 부터 전 생명주기동안 관리가 되므로, 초기화 되지않고, 기존에 저장된 값이 유지됨.

    ```js
    import {useState, useRef} from 'react';

    function App() {
    const [renderer, setRenderer] = useState(0);

    const countRef = useRef(0);
    let countVar = 0;

    const doRendering = () => {
        setRenderer(renderer + 1);
    }

    const increaseRef = () => {
        countRef.current = countRef.current + 1;
        console.log('ref : ', countRef.current);
    }

    const increaseVar = () => {
        countVar += 1;
        console.log('var: ', countVar);
    }

    return (
        <div className="App">
        <p>Ref: {countRef.current}</p>
        <p>Var: {countVar}</p>
        <button onClick={doRendering}>렌더!</button>
        <button onClick={increaseRef}>Ref 올려</button>
        <button onClick={increaseVar}>Var 올려</button>
        </div>
    );
    }

    export default App;
    ```
    > 렌더링 버튼을 누를시, var변수의 값은 아무리 올려도 초기화된 0으로 출력. Ref는 기록됨.
