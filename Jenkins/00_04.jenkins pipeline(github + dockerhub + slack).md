# jenkins pipeline(github + dockerhub + slack ì—°ë™)

<br>
<br>
<br>

## ğŸŒˆ ì„¤ê³„ êµ¬ì¡°ë„

<img 
    src = "../Image/jenkins/35.png"
    width = 800px
    height = 500px   
/>


<br>
<br>
<br>

## ğŸŒˆ êµ¬ì„± ìš”ì†Œ

* Jenkins server: AWS EC2 Ubuntu 20.04
* Deploy server: AWS EC2 Ubuntu 20.04
* Github Repository
* Docker Hub Repository
* Slack

<br>
<br>

## ğŸŒˆ ì§„í–‰ ê³¼ì •







<br>
<br>
<hr>
<br>
<br>

## ğŸŒˆ CI/CD ë¥¼ êµ¬ì¶•í•˜ê¸° ì „ ì´ˆê¸° ì„¸íŒ…

<br>
<br>

### ğŸ³ ê°„ë‹¨í•œ springboot í”„ë¡œì íŠ¸ ìƒì„± & git repoì™€ ì—°ê²°

<img 
    src = "../Image/jenkins/36.png"
    width = 800px
    height = 400px   
/>
<img 
    src = "../Image/jenkins/37.png"
    width = 800px
    height = 400px   
/>

### ğŸ³ jenkins server ì™€ deploy server ê³µí†µ ì´ˆê¸° ì„¸íŒ…

### ğŸ¯ 1. EC2 ì´ˆê¸° ì„¸íŒ…

* ìµœì‹ í™”

```zsh
$ sudo apt update
$ sudo apt upgrade -y
```

* ë„¤íŠ¸ì›Œí¬ ê´€ë ¨ íˆ´ ì„¤ì¹˜

```zsh
$ apt-get install net-tools
```

* buildì— í•„ìˆ˜ì ì¸ ì„¸íŒ…ë“¤ ì„¤ì¹˜(jenkins serverë§Œ í•´ë‹¹)

```zsh
$ sudo apt install build-essential
```


### ğŸ¯ 2. docker ì„¤ì¹˜

* aptê°€ HTTPSë¥¼ í†µí•´ ì €ì¥ì†Œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ íŒ¨í‚¤ì§€ ì„¤ì¹˜.

```zsh
$ sudo apt install apt-transport-https ca-certificates curl 
$ software-properties-common
```

* ìë™ ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ í™œìš©
    - ë¦¬ëˆ…ìŠ¤ ë°°í¬íŒ ì¢…ë¥˜ë¥¼ ìë™ìœ¼ë¡œ ì¸ì‹í•˜ì—¬ Docker íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•´ì£¼ëŠ” ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì œê³µ

```zsh
$ sudo wget -qO- https://get.docker.com/ | sh
```


### ğŸ¯ 3. docker ì„œë¹„ìŠ¤ ì‹¤í–‰ ë° ë¶€íŒ… ì‹œ ìë™ ì‹¤í–‰ ì„¤ì •

```zsh
$ sudo systemctl start docker
$ sudo systemctl enable docker      // í™œì„±í™”
$ sudo service docker status        // ìƒíƒœ í™•ì¸
```


### ğŸ¯ 4. ë„ì»¤ ê·¸ë£¹ì— í˜„ì¬ ê³„ì •ì„ ì¶”ê°€

* sudo ì‚¬ìš©í•˜ì§€ ì•Šê³  docker ì‚¬ìš© ê°€ëŠ¥í•˜ê²Œ ubunut ì‚¬ìš©ìë¥¼ ë„ì»¤ ê·¸ë£¹ì— ì¶”ê°€í•œë‹¤.
* docker ê·¸ë£¹ì€ rootê¶Œí•œê³¼ ë™ì¼í•˜ë¯€ë¡œ, ê¼­ í•„ìš”í•œ ê³„ì •ë§Œ ë“±ë¡.

```zsh
$ sudo usermod -aG docker ${USER}
// sudo usermod -aG docker ${ubuntu}
$ sudo systemctl restart docker
```

* ìœ„ì˜ ì‘ì—… ì§„í–‰ í›„, í˜„ì¬ ê³„ì •ì—ì„œ ë¡œê·¸ì•„ì›ƒ í›„ ë‹¤ì‹œ ë¡œê·¸ì¸ í–ˆì„ ë•Œ ì ìš©.

### ğŸ¯ 5. docker ì„¤ì¹˜ í™•ì¸

```zsh
$ docker -v
```


<br>
<br>
<hr>
<br>
<br>


### ğŸ³ jenkins server ì„¸íŒ….

### ğŸ¯ jenkins ì„¤ì¹˜

* jenkins image pull
    - í˜„ì¬(23.01.20 ê¸°ì¤€ lts ë²„ì ¼ ë‹¤ìš´)
```zsh
$ docker pull jenkins/jenkins:lts-jdk11
```

* jenkins container ë„ìš°ê¸°
    - í¬íŠ¸í¬ì›Œë”© 
        - 8080 : 8080
        - 50000 : 50000
    
    - ë³¼ë¥¨ ë§ˆìš´íŠ¸()
        - /home/ubuntu/.ssh : /root/.ssh
        - /var/run/docker.sock : /var/run/docker.sock
        
```zsh
$ docker run -d -p 8080:8080 -p 50000:50000 -v /jenkins:/var/jenkins -v /home/ubuntu/.ssh:/root/.ssh -v /var/run/docker.sock:/var/run/docker.sock --name jenkins -u root jenkins/jenkins:lts-jdk11
```



