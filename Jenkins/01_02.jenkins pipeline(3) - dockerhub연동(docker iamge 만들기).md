# docker image ë§Œë“¤ê³ , dockerhubë¡œ push. - 23.01.17 ê¸°ì¤€

<br>
<br>
<br>

## ğŸŒˆ jenkins container ë‚´ docker ì„¤ì¹˜

<br>
<br>

### ğŸ³ ì„¤ì¹˜ íˆ´

```zsh
$ apt update
$ apt-get install sudo
$ apt-get install wget
```

<br>

### ğŸ³ í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜.

* docker, docker pipeline ì„¤ì¹˜.

<br>
<br>


## ğŸŒˆ docker hub credential ë“±ë¡.

<br>

* Username : docker hubì˜ ë‚´ ê³„ì • ID.

* Password : docker hub ë‚´ ê³„ì • pwd.

* ID : pipelineì—ì„œ ì‚¬ìš©í•  docker credentialì˜ alias.

<img 
    src = "../Image/jenkins/43.png"
    width = 700px
    height = 300px   
/>

<br> 

## ğŸŒˆ pipeline script

<br>

* environment(script ë‚´ í™˜ê²½ë³€ìˆ˜ ë“±ë¡)
    - imagename : ë§Œë“¤ imageì˜ ì´ë¦„.
    - registryCredential : docker hubì™€ ì—°ë™ì‹œí‚¨ credential

```groovy
pipeline {
    agent any
    
    environment {
        imagename = "heesootory/jenkins_pipe"
        registryCredential = 'docker_hub'
        dockerImage = ''
    }

    stages {
        stage('Git Clone ğŸ¦Š') {
            steps {
                git url: 'https://github.com/heesootory/jenkins_pipe_test.git',
                    branch: 'main',
                    credentialsId: 'github_token'
            }
        }
        
        stage('Bulid Gradle ğŸ€') {
            steps {
                echo 'Bulid Gradle'
                dir('.'){
                    sh './gradlew clean build'
                }
            }
        }
        
        stage('Bulid Docker ğŸ³') {
            steps {
                echo 'Bulid Docker'
                script {
                    dockerImage = docker.build imagename
                }
            }
        }

        stage('Push Docker ğŸš€') {
            steps {
                echo 'Push Docker'
                script {
                    docker.withRegistry( '', registryCredential) {
                        dockerImage.push() 
                    }
                }
            }
        }
    }
}
```

<br>
<br>
<br>
<br>

> docker push ê¹Œì§€ì˜ jenkins stage view

<img 
    src = "../Image/jenkins/50.png"
    width = 600px
    height = 500px   
/>













